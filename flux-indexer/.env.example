# FluxIndexer Configuration
# Copy to .env and customize values for local development

# =============================================================================
# Flux RPC Configuration
# =============================================================================
# Note: Flux daemon v9.0.0+ is bundled in the Docker image
FLUX_RPC_URL=http://127.0.0.1:16124
FLUX_RPC_USER=fluxrpc
FLUX_RPC_PASSWORD=change_this_password
FLUX_RPC_TIMEOUT=30000

# =============================================================================
# ClickHouse Database Configuration
# =============================================================================
CH_HOST=127.0.0.1
CH_PORT=8123
CH_DATABASE=fluxindexer
CH_USER=default
CH_PASSWORD=
CH_REQUEST_TIMEOUT=300000
CH_MAX_CONNECTIONS=10

# =============================================================================
# Indexer Configuration
# =============================================================================
# Start height: -1 = genesis block, or specific block number
INDEXER_START_HEIGHT=-1

# Blocks per batch (higher = faster sync, more memory)
INDEXER_BATCH_SIZE=1000

# Polling interval in ms (time between checking for new blocks)
INDEXER_POLLING_INTERVAL=5000

# Maximum reorg depth to handle
INDEXER_MAX_REORG_DEPTH=100

# Backfill any detected block gaps before continuing
BACKFILL_GAPS=true

# =============================================================================
# API Server Configuration
# =============================================================================
API_PORT=42067
API_HOST=0.0.0.0

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL=info
# LOG_FILE=/var/log/fluxindexer.log

# =============================================================================
# Development Options
# =============================================================================
# NODE_ENV=development
# NODE_OPTIONS=--max-old-space-size=4096
