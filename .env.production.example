# Production Environment Variables for FluxIndexer Stack
# Copy this file to .env.production and customize the values
#
# IMPORTANT: Replace all "CHANGE_THIS_*" placeholders with secure passwords

# =============================================================================
# ClickHouse Database
# =============================================================================
CLICKHOUSE_USER=fluxindexer
CLICKHOUSE_PASSWORD=CHANGE_THIS_CH_PASSWORD

# ClickHouse Bootstrap (optional - speeds up initial database sync)
# Set to download pre-indexed database on first start
# Leave empty to index from genesis block
# Example: CH_BOOTSTRAP_URL=https://your-cdn.com/clickhouse-bootstrap.tar.gz
CH_BOOTSTRAP_URL=

# =============================================================================
# Flux Daemon RPC
# =============================================================================
FLUX_RPC_USER=fluxrpc
FLUX_RPC_PASSWORD=CHANGE_THIS_RPC_PASSWORD

# =============================================================================
# Indexer Configuration
# =============================================================================
# ClickHouse connection (for indexer container)
CH_HOST=clickhouse
CH_PORT=8123
CH_DATABASE=default
CH_USER=fluxindexer
CH_PASSWORD=CHANGE_THIS_CH_PASSWORD
CH_REQUEST_TIMEOUT=300000
CH_MAX_CONNECTIONS=25

# Indexer settings
INDEXER_BATCH_SIZE=5000
INDEXER_POLLING_INTERVAL=1000
INDEXER_START_HEIGHT=-1

# Backfill any detected block gaps before continuing
BACKFILL_GAPS=true

# Node.js memory limit (prevent OOM at high block heights)
NODE_OPTIONS=--max-old-space-size=6144

# API Server
API_PORT=42067
API_HOST=0.0.0.0

# Logging
LOG_LEVEL=info

# =============================================================================
# Explorer Frontend
# =============================================================================
# Client-side API URL: AUTO = use /api/indexer proxy route (recommended for FluxOS)
NEXT_PUBLIC_API_URL=AUTO

# Server-side API URL (for Next.js API routes inside container)
SERVER_API_URL=http://indexer:42067

# =============================================================================
# Bootstrap Configuration (OPTIONAL - speeds up initial sync)
# =============================================================================
# Flux Blockchain Data Bootstrap (blocks/chainstate folders - .tar.gz format)
# Leave empty to sync from genesis block
# Example: BOOTSTRAP_URL=https://your-cdn.com/flux-daemon-bootstrap.tar.gz
BOOTSTRAP_URL=
