{
  "version": 8,
  "name": "fluxexplorer",
  "description": "Flux Explorer - Full blockchain explorer with ClickHouse indexer. Storage: ~225GB total (120GB ClickHouse + 100GB daemon + 5GB explorer). RAM: 22GB+ total (ClickHouse 16GB + indexer 4GB + explorer 0.5GB). Set CH_BOOTSTRAP_URL and BOOTSTRAP_URL for faster deployment. Requires Flux v7.1.0+ for shared volume support.",
  "owner": "YOUR_ZELID_HERE",
  "instances": 3,
  "staticip": false,
  "enterprise": "",
  "compose": [
    {
      "name": "clickhouse",
      "description": "ClickHouse database (~61GB final, 120GB with bootstrap overhead). Needs 16GB+ RAM to handle merge spikes safely.",
      "repotag": "clickhouse/clickhouse-server:24.3-alpine",
      "ports": [8123],
      "containerPorts": [8123],
      "domains": [""],
      "environmentParameters": [
        "CLICKHOUSE_USER=fluxindexer",
        "CLICKHOUSE_PASSWORD=CHANGE_THIS_PASSWORD",
        "CLICKHOUSE_DB=fluxindexer",
        "CLICKHOUSE_DEFAULT_ACCESS_MANAGEMENT=1"
      ],
      "commands": [],
      "containerData": "/var/lib/clickhouse|m:backup:/var/lib/clickhouse/backup",
      "cpu": 4.0,
      "ram": 16384,
      "hdd": 120,
      "tiered": false
    },
    {
      "name": "indexer",
      "description": "Flux daemon (fluxd) + blockchain indexer + REST API (~50GB final, 100GB with bootstrap overhead). Daemon uses ~1.5GB RAM, indexer ~1GB.",
      "repotag": "littlestache/flux-indexer:latest",
      "ports": [42067],
      "containerPorts": [42067],
      "domains": [""],
      "environmentParameters": [
        "FLUX_RPC_URL=http://127.0.0.1:16124",
        "FLUX_RPC_USER=fluxrpc",
        "FLUX_RPC_PASSWORD=CHANGE_THIS_RPC_PASSWORD",
        "CH_HOST=fluxclickhouse_fluxexplorer",
        "CH_PORT=9000",
        "CH_HTTP_PORT=8123",
        "CH_DATABASE=fluxindexer",
        "CH_USER=fluxindexer",
        "CH_PASSWORD=CHANGE_THIS_PASSWORD",
        "CH_BOOTSTRAP_URL=",
        "INDEXER_BATCH_SIZE=200",
        "INDEXER_POLLING_INTERVAL=1000",
        "INDEXER_START_HEIGHT=-1",
        "API_PORT=42067",
        "API_HOST=0.0.0.0",
        "LOG_LEVEL=info",
        "BOOTSTRAP_URL="
      ],
      "commands": [],
      "containerData": "/home/flux/.flux|c:0:backup:/clickhouse-backup",
      "cpu": 4.0,
      "ram": 4096,
      "hdd": 100,
      "tiered": false
    },
    {
      "name": "explorer",
      "description": "Flux Explorer web interface - Next.js frontend (~70MB actual usage)",
      "repotag": "littlestache/flux-explorer:latest",
      "ports": [42069],
      "containerPorts": [42069],
      "domains": [""],
      "environmentParameters": [
        "NODE_ENV=production",
        "NEXT_TELEMETRY_DISABLED=1",
        "HOSTNAME=0.0.0.0",
        "PORT=42069",
        "SERVER_API_URL=http://fluxindexer_fluxexplorer:42067"
      ],
      "commands": [],
      "containerData": "/app/data",
      "cpu": 1.0,
      "ram": 512,
      "hdd": 5,
      "tiered": false
    }
  ]
}
